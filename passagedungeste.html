<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Passage d'un geste</title>
    
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }

          iframe {
            width: 320px;
            height: 240px;
            margin-bottom: 20px;
        }
   
        form {
            margin-bottom: 20px;
        }
        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            width: 160px;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin-left: 10px;
            cursor: pointer;
        }

        footer {
            position: fixed;
            left: 0;
            bottom: 0;
            width: 98%;
            text-align: right;
            font-size: 10px;
            color: #000000;
            background-color: transparent;
            padding: 10px 0;
        }

        
    </style>

       <nav>
<a href="index.html">Index</a>  
<a href="passagedungeste.html">Passage d’un geste</a>  
<a href="archives.html">Archives</a>
    </nav>
    
</head>

    
<body>
    
    <h1>Passage d'un geste</h1>

<!-- Lecteur vidéo -->
    <video id="video-player" controls>
        <source id="video-source" type="video/mp4">
        Votre navigateur ne supporte pas la balise vidéo.
    </video>

    <div>
        <input type="text" id="wordInput" placeholder="Entrez un mot" />
        <button onclick="submitWord()">Entrer</button>
    </div>

    <script>
        const videoIds = [
            '1RKbUMv5Cb8hNG91mad9Gfrm6s7KaZTHm', // ID des vidéos stockées sur Google Drive
            '1dS1g7cCQyPIiG_EKWxklk2W-SjQT62Nc',
            '1e_-G5dFKYpV3GYNXMTmIwberdUiQefPS'
            '1bYc33ZJOpsJtk5_m61kPDrE6KbwgyuEW',
            '16BgshV2cCpBM6_nZSGHBJJfzHKrJTNTM',
            '1ZlUKSSiFyXz9ufmATEEeqFVxjU6PwkP0',
            '10wJ4b3kok7VrkfmjAR0JRmpB9PgJPX_T',
            '1TV-izTFz0kq5xK7mJLtfh7rFvki8gEgG',
            '1RsTiiWXtlFK-icgB0FaZTfV2vVwe5shG',
            '1ZWeW85nU4YbMMHgq71lFftj1CFlTvcuh',
            '1hjV0YYEvvT2sv-XX3Yx6Jeh-7n80t4a_',
            '13O4bijOS1TQyoyGUShIDhZNLPDXIZ8XK',
            '1ibtfV5Z4PSYfSVip7INDKcRBkLDcbmzn',
            '13syi0RzQ7ZTOZ3VznQBPixexfTA4_Cat',
            '1JjUSe20PCpcTF9Hkdabk4Mjw6nlzPU8G',
            '1uBmlW0OFP09PRegs1MB2iujZduO8dZIt',
            '1b7FhvMVG6KgKko8kqXe-iYMoEifOjP6X',
            '1oKI6kdrV0TSq3W48GEqC2uuI35atHtCy',
            '1w9yDIsgaCAYwVR_-tlLyMrUOWmotB3DF',
            '1FA_fUUbssydUnL8LONsRsyw8Xwd3YHJs'
        ];

        let currentVideoIndex = 0;

        // Fonction pour changer la vidéo (utilisation de l'API Google Drive)
        function loadVideo() {
            const videoId = videoIds[currentVideoIndex];
            getVideoUrlFromDrive(videoId).then(url => {
                const videoSource = document.getElementById("video-source");
                videoSource.src = url;

                const videoPlayer = document.getElementById("video-player");
                videoPlayer.load();
                videoPlayer.play();
            });
        }

        // Fonction pour récupérer l'URL de la vidéo via l'API Google Drive
        async function getVideoUrlFromDrive(videoId) {
            const apiKey = 'AIzaSyBf4qchjjDPoSc7MhPd03ekIrbraPFw2sw';  // Remplacez par votre clé API Google
            const apiUrl = `https://www.googleapis.com/drive/v3/files/${videoId}?alt=media&key=${apiKey}`;
            
            const response = await fetch(apiUrl);
            if (!response.ok) {
                console.error("Erreur lors de la récupération de la vidéo:", response);
                return '';
            }
            const data = await response.blob();
            return URL.createObjectURL(data);
        }

  // Fonction pour envoyer un mot validé à Google Sheets
        function submitWord() {
            const wordInput = document.getElementById("wordInput");
            const word = wordInput.value.trim();
            if (word !== "") {
                // Envoi du mot à Google Sheets via une requête POST
                fetch('https://script.google.com/macros/s/AKfycbxldBG0HIFBRqHpVySL1eE-5vbAPpdVh8lnkhAmmyoRjSuBOElgrrH_lSaLJ37ksxZCbw/exec', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ word: word }),
                })
                .then(response => response.json())
                .then(data => {
                    console.log('Réponse du serveur:', data);
                    // Passer à la vidéo suivante
                    currentVideoIndex = (currentVideoIndex + 1) % videoIds.length;
                    loadVideo(); 
                })
                .catch(error => {
                    console.error('Erreur:', error);
                });

                wordInput.value = ""; // Réinitialiser la zone de texte
            } else {
                alert("Veuillez entrer un mot.");
            }
        }

        loadVideo(); // Charger la première vidéo
    </script>
    
    <footer>
        Ambre Guidicelli © ArTeC 2024
    </footer>
</body>
</html>
