<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Passage d'un geste</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        video {
            width: 80%;
            max-height: 400px;
            margin-bottom: 20px;
        }
        form {
            margin-bottom: 20px;
        }
        input[type="text"] {
            padding: 10px;
            font-size: 16px;
            width: 60%;
        }
        button {
            padding: 10px 20px;
            font-size: 16px;
            margin-left: 10px;
            cursor: pointer;
        }
    </style>

       <nav>
         
<a href="passagedungeste.html">Passage d’un geste</a>  
<a href="archive.html">Archives</a>
<a href="contact.html">Contact</a>
    </nav>
    
</head>
<body>
    <h1>Passage d'un geste</h1>
    <video id="videoPlayer" controls>
        <source src="" type="video/mp4">
        Votre navigateur ne supporte pas la lecture de vidéos.
    </video>
    <form id="wordForm">
        <input type="text" id="wordInput" placeholder="Écrivez un mot" required>
        <button type="submit">Valider</button>
    </form>
    <button id="nextButton">Vidéo suivante</button>
    
    <script>
        // Liste des vidéos (remplace les URLs par tes liens Google Drive ou autres)
        const videos = [
            "https://example.com/video1.mp4",
            "https://example.com/video2.mp4",
            "https://example.com/video3.mp4"
        ];

        let currentVideoIndex = 0;

        // Charge la première vidéo au démarrage
        const videoPlayer = document.getElementById("videoPlayer");
        const wordInput = document.getElementById("wordInput");
        const wordForm = document.getElementById("wordForm");
        const nextButton = document.getElementById("nextButton");

        function loadVideo(index) {
            videoPlayer.src = videos[index];
            videoPlayer.load();
        }

        loadVideo(currentVideoIndex);

        // Envoie les données à l'API Google Sheets
        wordForm.addEventListener("submit", async (event) => {
            event.preventDefault();

            const word = wordInput.value.trim();
            const video = videos[currentVideoIndex];

            if (word) {
                try {
                    const response = await fetch("https://script.google.com/macros/s/AKfycbxldBG0HIFBRqHpVySL1eE-5vbAPpdVh8lnkhAmmyoRjSuBOElgrrH_lSaLJ37ksxZCbw/exec ", { // Remplace par l'URL de ton API
                        method: "POST",
                        headers: {
                            "Content-Type": "application/json",
                        },
                        body: JSON.stringify({ video, word }),
                    });

                    const message = await response.text();
                    alert(message);

                    // Efface le champ texte
                    wordInput.value = "";
                } catch (error) {
                    console.error("Erreur lors de l'envoi à l'API :", error);
                    alert("Une erreur est survenue. Veuillez réessayer.");
                }
            }
        });

        // Passer à la vidéo suivante
        nextButton.addEventListener("click", () => {
            currentVideoIndex++;
            if (currentVideoIndex < videos.length) {
                loadVideo(currentVideoIndex);
            } else {
                alert("Toutes les vidéos ont été visionnées !");
                currentVideoIndex = 0; // Réinitialise pour recommencer si nécessaire
                loadVideo(currentVideoIndex);
            }
        });
    </script>
</body>
</html>
